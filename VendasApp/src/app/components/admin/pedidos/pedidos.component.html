<h1 class="text-center">Listagem de Pedidos</h1>

<table class="table table-striped table-bordered table-hover">
  <tr>
    <th>Usuário</th>
    <th>Data</th>
    <th>Situação</th>
    <th>Itens</th>
    <th colspan="2">Ações</th>
  </tr>
  <tr *ngFor="let pedido of pedidos">
    <td>{{pedido.usuario.login}}</td>
    <td>{{pedido.data}}</td>
    <td>{{pedido.situacaoDescricao}}</td>
    <td>
      <ul>
        <li *ngFor="let item of pedido.detalheVendas">
          <img [src]="item.produto?.urlImagem" alt="Image do produto {{item.produto?.nome}}" class="imagem-icon">
          {{item.produto?.nome}} - R$ {{item.produto?.preco[0].valor}}</li>
      </ul>
    </td>
    <td>
      <button type="button" class="btn btn-success" *ngIf="pedido.situacao === 0" (click)="aprovar(pedido?.id)">Aprovar</button>
      <button type="button" class="btn btn-danger" *ngIf="pedido.situacao === 0" (click)="reprovar(pedido?.id)">Reprovar</button>
      <button type="button" class="btn btn-danger" disabled *ngIf="pedido.situacao === 2" (click)="reprovar(pedido?.id)">Reprovado</button>
      <button type="button" class="btn btn-success" disabled *ngIf="pedido.situacao === 1" (click)="aprovar(pedido?.id)">Aprovado</button>
    </td>
  </tr>
</table>
